{% extends "tracker/base.html" %}
{% load i18n tracker_extras table %}
{% block content %}
{% is_current_month month as is_current %}
{% is_current_month next_month as is_next_current %}
<div id="navigation">
  <div class="left">
    <a href='{% archive_url previous_month %}'
       title='{% trans "View previous month expenditures" %}'>
      {% trans "previous month"|capfirst %}
    </a>
  </div>{% if not is_current %}
  <div class="center">
    <a href={% url "tracker:list" %}
       title='{% trans "View current month expenditures" %}'>
      {% trans "current month"|capfirst %}
    </a>
  </div>{% if not is_next_current %}
  <div  class="right">
    <a href='{% archive_url next_month %}'
       title='{% trans "View next month expenditures" %}'>
      {% trans "next month"|capfirst %}
    </a>
  </div>{% endif %}{% endif %}
</div>
<div id="main">
  <p>
    <a id="add-expenditure" href={% url "tracker:add" %}>{% blocktrans %}Add a new expenditure...{% endblocktrans %}</a>
  </p>{% if expenditures %}{% if is_current %}
  <p>
    {% blocktrans with date=month|date:"E Y" total=total_amount|floatformat:2 user=user_amount|floatformat:2 %}In {{ date }}, the current amount of expenditures is equal to {{ total}}€; You authored {{ user }}€.{% endblocktrans %}
  </p>{% else %}
  <p>
    {% blocktrans with date=month|date:"E Y" total=total_amount|floatformat:2 user=user_amount|floatformat:2 %}In {{ date }}, the total amount of expenditures was equal to {{ total}}€; You authored {{ user }}€.{% endblocktrans %}
  </p>
  {% endif %}
  <table id="expenditures-table">
    {% table_header field_names %}
    <tfoot>
      <tr>
	<td colspan=4>
	  {% trans "page:"|capfirst %} {% pagination %}
	</td>
      </tr>
    </tfoot>
    <tbody>{% for obj in object_list %}
      <tr>
	<td title="{{ obj.date }}" class="date">
	  {{ obj.date }}
	</td>
	<td title="{{ obj.amount }}" class="amount">
	  {{ obj.amount|floatformat:2 }}
	</td>{% with user=obj.author %}
	<td title="{% firstof user.first_name user.username %}" class="author">
	  {% firstof user.first_name user.username %}
	</td>{% endwith %}
	<td title="{{ obj.description }}" class="description">
	  {{ obj.description|capfirst }}
	</td>
      </tr>{% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>
    {% blocktrans with date=month|date:"E Y" %}No expenditures found for {{ date }}!{% endblocktrans %}{% if is_current %}
<a id="add-expenditure" href={% url "tracker:add" %}>{% blocktrans %}Add a new expenditure...{% endblocktrans %}</a>{% endif %}
  </p>
{% endif %}</div>
{% endblock %}
