{% extends "tracker/base.html" %}
{% load i18n %}
{% block content %}
<h2>{% trans "new expenditure"|capfirst %}</h2>
{% if form.errors %}<p class="errornote">
  {% blocktrans count counter=form.errors.items|length %}Please correct the error below.{% plural %}Please correct the errors below.{% endblocktrans %}
</p>{% endif %}
<form id="expenditure-form"
      action={% url "tracker:add" %} 
      method="post">{% csrf_token %}
  {% for field in form.visible_fields|slice:":3" %}
  {{ field.errors }}
  <p>
    {{ field.label_tag }}: {{ field }}
    <span class="helptext">
      {{ field.help_text }}
    </span>
  </p>
  {% endfor %}
  <div id="form-details">
    <a id="show-details-anchor" href="javascript:showDetails()">
      {% trans "more..."|capfirst %}
    </a>
    <div id="form-details-content" style="display: none;">
      {% for field in form.visible_fields|slice:"3:" %}
      {{ field.errors }}
      <p>
	{{ field.label_tag }}: {{ field }}
	<span class="helptext">
	  {{ field.help_text }}
	</span>
      </p>
      {% endfor %}
    </div>
  </div>
  <input type="submit" value={% trans "add"|capfirst %}>
</form>
{% endblock %}
{% block scripts %}
{{ block.super }}
<script type="text/javascript">
  document.getElementById('id_amount').focus();

  function showDetails() {
     document.getElementById('form-details-content').style.display = 'inline';
     document.getElementById('show-details-anchor').style.display = 'none';
  }
</script>
{% endblock %}
