{% extends 'tracker/base.html' %}
{% load i18n tracker_extras table %}

{% block tools %}
<li>
  <a id="create-purse" href="{% url 'tracker:purse_creation' %}"
     title="{% trans 'Create a new purse' %}">
    {% trans 'add'|capfirst %}
  </a>
</li>
<li>
  <a id="share-purse" href="{% url 'tracker:purse_share' %}"
     title="{% trans 'Share purse with other users' %}">
    {% trans 'share'|capfirst %}
  </a>
</li>
{% endblock tools %}

{% block parameters %}
<ul class="nav navbar-nav navbar-right">
  {% include 'tracker/nav_parameters.html' %}
</ul>
{% endblock parameters %}

{% block header %}
<h2>{% trans 'Purses management' %}</h2>
{% endblock %}

{% block content %}
<div id="main">
  <p>
    {% if purses %}
    {% blocktrans count counter=purses|length %}You have access to one purse.{% plural %}You have access to {{ counter }} purses.{% endblocktrans %}
  </p>
  <div class="table-responsive">
    <table class="table table-hover table-bordered table-striped">
      {% table_header field_names %}
      <tbody>
	{% for p in purses %}
	<tr>
	  <td title="{{ p.name }}">
	    {{ p.name }}
	  </td>
	  <td title="{{ p.usernames }}">
	    {{ p.usernames }}
	  </td>
	  <td title="{{ p.description }}">
	    {{ p.description|capfirst }}
	    <a href="{% url 'tracker:purse_update' pk=p.id %}"
	       title="{% trans 'Edit this purse data' %}">
	      <span class="badge pull-right">
		<span class="glyphicon glyphicon-pencil"></span>
	      </span>
	    </a>
	  </td>
	</tr>
	{% endfor %}
      </tbody>
    </table>
    {% pagination %}
  </div>
  {% else %}
  <p>
    {% blocktrans %}You don't belong to any purse right now!{% endblocktrans %}
    <a href="{% url 'tracker:purse_creation' %}">
      {% blocktrans %}Create a new purse...{% endblocktrans %}
    </a>
    {% endif %}
  </p>
</div>
{% endblock content %}

{% block scripts %}
<script type="text/javascript">
  Tracker.focus('create-purse');
</script>
{% endblock scripts%}
